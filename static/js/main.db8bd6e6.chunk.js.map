{"version":3,"sources":["components/CBKSelect/addChart.ts","reportWebVitals.ts","index.tsx","utils/index.ts","utils/Octokit.ts","components/DesignCase.tsx","api/upload.ts","template/template.ts","utils/template.ts","App.tsx","components/ProductionTutorials.tsx","components/Reference.tsx","components/Contributors.tsx","components/SimilarCharts.tsx","utils/exportFile.ts","api/github.ts","utils/singlePromise.ts","components/CBKSelect/index.tsx","components/ChartProps/EditableTagGroup.tsx","components/ChartProps/ChartProps.tsx","components/context.ts","components/ChartProps.tsx","utils/request.ts"],"names":["mergeChartProps","chartData","forEach","trans","chartKnowledge","addChart","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","App","document","getElementById","Object2FormData","data","form","FormData","key","Object","prototype","hasOwnProperty","call","value","append","toHump","name","replace","all","letter","toUpperCase","getStyles","style","output","styleArr","split","i","length","rule","trim","ruleParts","match","$1","redirect_uri","window","location","href","login_url","REPO","OWNER","searchParams","URL","config","p","pathname","s","search","configStr","sessionStorage","getItem","console","log","get","JSON","parse","u","error","setItem","stringify","getAccessToken","singlePromise","githubToken","Cookies","code","set","loginOAuth","access_token","expires","initOctokit","octokit","getToken","Octokit","auth","submit","request","owner","repo","forkRepo","rest","repos","createFork","response","pushFile","params","createOrUpdateFileContents","branch","content","Buffer","from","toString","sha","getFile","getContent","path","createPullRequest","loginId","pulls","create","title","head","base","body","number","CaseContent","styled","div","CaseBlock","Container","children","Item","image","description","link","src","alt","className","target","rel","prefix2","uploadImg","method","url","checkResult","uploadURL","urlList","urls","mdxString","templateString","template","string","interpolate","PlaceHolder","opacity","components","DesignCaseContainer","DesignCase","DesignCaseItem","ProductionTutorials","Reference","Contributors","SimilarCharts","ChartProps","scope","some","plugins","frontmatter","gfm","highlight","zhCompletedKB","CKBJson","filePath","decodeURIComponent","React","useState","enName","setContent","setSha","loading","setLoading","chartPropsModalVisible","setChartPropsModalVisible","chartInfo","setChartInfo","chartPropsList","setChartPropsList","useEffect","includes","file","catch","notification","message","finally","mergeChartPropsFromGithub","list","eval","Array","isArray","paths","onChange","newValue","replaceValue","uploadImages","files","smfile","result","imgList","push","handleRepalceAllImg","imgReg","matchList","newCotnet","preUrl","oldURL","newUrl","Error","success","warn","openModal","delete","history","replaceState","downloadFile","exportFile","id","handleScroll","e","submitRepo","commitMsg","Modal","confirm","addonBefore","placeholder","currentTarget","fontSize","marginTop","onOk","forkData","login","findIndex","item","alias","def","onCancel","handleChartPropsChange","values","cnName","cnAlias","cnDef","compiled","representativePicture","overview","constitution","appropriateScene","unAppropriateScene","reference","learningResource","specialTool","usageScene","productionTutorial","contributors","height","marginLeft","onClick","type","disabled","undefined","spinning","mode","overridePreview","el","props","visible","onVisibleChange","Table","table","Td","td","newTableData","background","keys","map","text","group","newGroup","subLength","linkText","groupData","subItem","j","columnOne","rowSpan","columnTwo","columnThree","concat","assign","handleTableData","index","width","textAlign","paddingLeft","textDecoration","color","renderTR","ShowAllButton","show","setShow","useSpring","tension","friction","precision","to","overflow","ContributeName","span","marginBottom","info","contentEl","date","dayjs","format","trigger","placement","size","fileName","eleLink","createElement","download","display","blob","Blob","createObjectURL","appendChild","click","removeChild","getKey","cache","Option","Select","CBKSelect","showSearch","optionFilterProp","onFocus","onBlur","onSearch","val","filterOption","input","option","toLowerCase","indexOf","options","EditableTagGroup","tags","setTags","inputVisible","setInputVisible","inputValue","setInputValue","editInputIndex","setEditInputIndex","editInputValue","setEditInputValue","inputRef","useRef","editInputRef","current","focus","handleChange","handleInputConfirm","handleEditInputChange","handleEditInputConfirm","newTags","tag","ref","onPressEnter","isLongTag","tagElem","closable","onClose","removedTag","filter","handleClose","onDoubleClick","preventDefault","slice","concepts","translateMapping","layout","labelCol","wrapperCol","validateMessages","required","types","email","range","ChartPropsEidtor","setZhCompletedKB","setVisible","Form","useForm","setFieldsValue","handleVisibleChange","v","ckbOptions","category","purpose","shape","family","resetFields","onFinish","matchstr","recRate","channel","label","help","cnData","rules","min","max","FAMILY_OPTIONS","PURPOSE_OPTIONS","GRAPHIC_CATEGORY_OPTIONS","SHAPE_OPTIONS","ChartContext","createContext","chartList","currentChart","useContext","http","Axios","baseURL","timeout","tip","errorTip","status","isObjectLike","String"],"mappings":"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","file":"static/js/main.db8bd6e6.chunk.js","sourcesContent":["import { CKBJson, addChart, ChartKnowledge, Language, TransKnowledgeProps } from '@antv/knowledge';\r\n\r\nexport function mergeChartProps(chartData: any[]) {\r\n  chartData.forEach(({trans, chartKnowledge}) => {\r\n    addChart(\r\n      chartKnowledge as ChartKnowledge,\r\n      trans as Record<string, TransKnowledgeProps>\r\n    );\r\n  })\r\n}\r\n\r\nexport { CKBJson }","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport 'bytemd/dist/index.min.css'\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","export function Object2FormData(data: Record<string, any>) {\r\n    const form = new FormData()\r\n    for (const key in data) {\r\n        if (Object.prototype.hasOwnProperty.call(data, key)) {\r\n            const value = data[key]\r\n            form.append(key, value)\r\n        }\r\n    }\r\n    return form\r\n}\r\n\r\n\r\nexport function toHump(name: string) {\r\n\r\n    return name.replace(/^(\\w)/,function(all, letter){\r\n        return letter.toUpperCase();\r\n    }).replace(/_(\\w)/g, function(all, letter){\r\n        return ' ' + letter.toUpperCase();\r\n    });\r\n}\r\n\r\n\r\nexport function getStyles(style: string) {\r\n    var output: Record<string, string> = {};\r\n  \r\n    if (!style) {\r\n        return {};\r\n    }\r\n  \r\n    var camelize = function camelize(str: string) {\r\n        return str.replace (/-(.)/g, (match: string, $1: string | undefined) => {\r\n          if ($1) {\r\n            return $1.toUpperCase();\r\n          }\r\n          return match;\r\n        })\r\n    }\r\n  \r\n    var styleArr = style.split(';');\r\n  \r\n    for (var i = 0; i < styleArr.length; ++i) {\r\n  \r\n        var rule = styleArr[i].trim();\r\n  \r\n        if (rule) {\r\n            var ruleParts = rule.split(':');\r\n            var key = camelize(ruleParts[0].trim());\r\n            output[key] = ruleParts[1].trim();\r\n            \r\n        }\r\n    }\r\n  \r\n    return output;\r\n  }","import Cookies from \"js-cookie\";\r\nimport { getUser, loginOAuth } from \"../api/github\";\r\nimport { Octokit } from \"@octokit/rest\";\r\nimport { singlePromise } from \"./singlePromise\";\r\n\r\nconst redirect_uri = window.location.href\r\nconst login_url = `https://github.com/login/oauth/authorize?client_id=6a421acdfb303b06a3bf&scope=public_repo&redirect_uri=${redirect_uri}`;\r\n// const login_url = `https://github.com/login/oauth/authorize?client_id=6a421acdfb303b06a3bf&scope=public_repo`;\r\n\r\nexport const REPO = \"gradict-charts-doc\"; // 仓库名称\r\nconst ORGANIZATION = 'Plothis';\r\nconst OWNER = ORGANIZATION; // 仓库的 owner\r\n\r\nconst searchParams = new URL(window.location.href).searchParams;\r\nconst config = {\r\n  p: window.location.pathname,\r\n  s: window.location.search\r\n}\r\nconst configStr = sessionStorage.getItem('config')\r\nconsole.log(searchParams.get('code'))\r\nif (!searchParams.get('code')) {\r\n  sessionStorage.setItem('config', JSON.stringify(config))\r\n} else if (configStr) {\r\n  try {\r\n    const config = JSON.parse(configStr)\r\n    const u = new URL(window.location.href)\r\n    u.pathname = config.p;\r\n    u.search = config.s;\r\n    console.log(u)\r\n    // window.history.replaceState(null, '', u.href)\r\n    // sessionStorage.removeItem('config')\r\n  } catch (error) {\r\n    \r\n  }\r\n}\r\n\r\n\r\nexport const getAccessToken = singlePromise(async function () {\r\n  let githubToken = Cookies.get(\"github-token\");\r\n  const searchParams = new URL(window.location.href).searchParams;\r\n  if (githubToken) {\r\n    return githubToken;\r\n  }\r\n\r\n  let code =\r\n    searchParams.get(\"code\") ||\r\n    Cookies.get(\"github-code\") ||\r\n    \"8c2cb19fe6abbcc64a6c\";\r\n\r\n  if (!code) {\r\n    window.location.href = login_url\r\n    return;\r\n  } else {\r\n    Cookies.set(\"github-code\", code);\r\n  }\r\n  try {\r\n    const data = await loginOAuth(code);\r\n    Cookies.set(\"github-token\", data.access_token, {\r\n      expires: 86400000 * 7,\r\n    });\r\n    return data.access_token;\r\n  } catch (error) {\r\n    window.location.href = login_url;\r\n  }\r\n}, () => 1)\r\n\r\nexport function initOctokit() {\r\n  let octokit: Octokit;\r\n  let user: string;\r\n  function getToken() {\r\n    if (octokit) {\r\n      return;\r\n    }\r\n    return getAccessToken().then((githubToken) => {\r\n      octokit = new Octokit({\r\n        auth: githubToken,\r\n      });\r\n    });\r\n  }\r\n\r\n  return {\r\n    async submit() {\r\n      await getToken();\r\n      await octokit.request(\"GET /repos/{owner}/{repo}/commits\", {\r\n        owner: OWNER,\r\n        repo: REPO,\r\n      });\r\n    },\r\n    async forkRepo() {\r\n      await getToken();\r\n      const response = await octokit.rest.repos.createFork({\r\n        owner: OWNER,\r\n        repo: REPO,\r\n        // organization: OWNER\r\n      });\r\n      console.log(`Forked repo ${OWNER}/${REPO} to ${response.data.name}`);\r\n      return response.data;\r\n    },\r\n    async pushFile (params: {\r\n      owner: string;\r\n      repo: string;\r\n      path: string;\r\n      content: string\r\n      message: string\r\n      sha?: string;\r\n      branch?: string;\r\n    }) {\r\n      await getToken();\r\n      const response = await octokit.repos.createOrUpdateFileContents({\r\n        ...params,\r\n        branch: 'master',\r\n        content: Buffer.from(params.content, 'utf-8').toString(\"base64\"), // 将内容编码为 base64 格式\r\n      });\r\n  \r\n      return response.data?.content?.sha; // 返回提交的 SHA 值\r\n    },\r\n    async getFile (params: {\r\n      owner?: string;\r\n      // repo: string;\r\n      path: string;\r\n    }) {\r\n      await getToken();\r\n      const response = await octokit.repos.getContent({\r\n        owner: params.owner || OWNER,\r\n        repo: REPO,\r\n        path: params.path,\r\n        branch: 'master',\r\n      });\r\n      (response.data as any).content = Buffer.from((response.data as any).content, 'base64').toString('utf-8')\r\n      return response.data as {\r\n        size: number;\r\n        name: string;\r\n        path: string;\r\n        content?: string | undefined;\r\n        sha: string;\r\n      };\r\n    },\r\n    async  createPullRequest(loginId: string) {\r\n      await getToken();\r\n      const response = await octokit.rest.pulls.create({\r\n        owner: OWNER,\r\n        repo: REPO,\r\n        title: \"New file added\", // PR 标题\r\n        head: `${loginId}:master`, // 提交到自己 fork 的仓库\r\n        base: \"contribution\", // PR 发送到的分支\r\n        body: \"This is a new file\", // PR 描述\r\n      });\r\n      console.log(`Created pull request #${response.data.number}`);\r\n    }\r\n  };\r\n}\r\n","// @ts-nocheck\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst CaseContent = styled.div`\n  margin: 0 60px;\n  column-count: 2;\n  column-gap: 30px;\n\n  >div{\n    break-inside: avoid;\n  }\n\n  >div:not(:first-child) {\n    margin-top: 30px;\n  }\n`;\n\n// TODO 点击查询放大图\nconst Container = ({ children }) => {\n  return <CaseContent>{children}</CaseContent>;\n}\n\ninterface ItemProps {\n  description: string;\n  image: string;\n  link?: string;\n}\n\n\nconst CaseBlock = styled.div`\n  padding: 20px;\n  /* 该用 column count 方式后，第二排上面的阴影看不到了，先用 border 实现 */\n  /* box-shadow: 0px 0px 4px 2px rgba(211, 211, 211, 0.5); */\n  border: 1px solid rgb(230, 230, 230);\n  overflow: hidden;\n\n  img {\n    width: 100%;\n  }\n\n  .case-text {\n    padding: 10px 20px;\n    color: #4a4a4a;\n    font-size: 14px;\n    text-align: justify;\n    line-height: 30px;\n    @media screen and (max-width: 600px) {\n      line-height: 20px;\n      font-size: 13px;\n      padding: 10px 0;\n    }\n  }\n\n  .view-origin {\n    border: 1px solid #d0d0d0;\n    float: right;\n    font-size: 14px;\n    border-radius: 2px;\n    text-align: center;\n    padding: 8px 12px;\n    cursor: pointer;\n    color: rgb(74, 74, 74);\n    text-decoration: none;\n  }\n`;\n\nconst Item: React.FC<ItemProps> = ({ image, description, link }) => {\n  return (\n    <CaseBlock>\n      <div\n      // TODO 预览\n      // onClick={() => this.handlePreview(i * 2)}\n      >\n        <img src={image} alt=\"图片\" />\n      </div>\n      <div className=\"case-text\">{description}</div>\n      {link ? (\n        <a className=\"view-origin\" href={link} target=\"_blank\" rel=\"noopener noreferrer\">\n          查看出处\n        </a>\n      ) : null}\n    </CaseBlock>\n  )\n}\n\nexport default { Container, Item };","import { Object2FormData } from '../utils';\r\nimport request, { checkResult } from '../utils/request';\r\n\r\n\r\nconst prefix2 = process.env.NODE_ENV === 'production' ? '//api.8and1.cn/mdx-editor/v1' : 'http://127.0.0.1:7001/api/v1';\r\n\r\nexport function uploadImg(data: any) {\r\n  return request({\r\n    method: \"POST\",\r\n    url: `${prefix2}/common/uploadImg`,\r\n    data: Object2FormData(data),\r\n  }).then(checkResult);\r\n}\r\n\r\nexport function uploadURL(urlList: string[]) {\r\n  return request<Record<string, string>>({\r\n    method: \"POST\",\r\n    url: `${prefix2}/common/uploadFromNetWork`,\r\n    data: {\r\n      urls: urlList\r\n    },\r\n  }).then(checkResult);\r\n}","export const mdxString = `\r\n\r\n# {{name}} - {{enName}}\r\n\r\n\r\n<section id=\"overview-graph-detail-content\">\r\n\r\n\r\n</section>\r\n\r\n<section id=\"chart-property-graph-detail\">\r\n\r\n  <ChartProps />\r\n\r\n</section>\r\n\r\n`\r\n\r\nexport const templateString = `\r\n# {{name}} - {{enName}}\r\n\r\n\r\n<section id=\"overview-graph-detail-content\">\r\n\r\n![chart-overview]({{representativePicture}})\r\n\r\n{{overview}}\r\n\r\n</section>\r\n\r\n## 图表属性\r\n\r\n<!-- 自动识别，勿修改 -->\r\n<section id=\"chart-property-graph-detail\">\r\n\r\n  <ChartProps />\r\n\r\n</section>\r\n\r\n## 图表详解\r\n\r\n### 元素构成\r\n\r\n<section id=\"chart-detail-graph-detail-content\">\r\n\r\n{{constitution}}\r\n\r\n</section>\r\n\r\n### 适用场景\r\n\r\n<section id=\"appropriate-scene-graph-detail\">\r\n\r\n{{appropriateScene}}\r\n\r\n</section>\r\n\r\n### 不适用场景\r\n\r\n<section id=\"unappropriate-scene-graph-detail\">\r\n\r\n{{unAppropriateScene}}\r\n\r\n</section>\r\n\r\n## 相似图形\r\n\r\n<!-- 自动识别，勿修改 -->\r\n<div id=\"resemble-chart-graph-detail\"></div>\r\n\r\n<SimilarCharts/>\r\n\r\n## 设计案例\r\n\r\n<div id=\"design-case-graph-detail\"></div>\r\n\r\n<DesignCaseContainer>\r\n  {{DesignCase}}\r\n</DesignCaseContainer>\r\n\r\n## 使用场景\r\n\r\n<div id=\"usage-scene-graph-detail-content\"></div>\r\n\r\n{{usageScene}}\r\n\r\n## 制作教程\r\n\r\n<!-- 制作教程大类有：BI 工具 / 代码库 / 设计软件，请依次按照顺序填写 -->\r\n\r\n<div id=\"production-tutorial-graph-detail\"></div>\r\n\r\n{{productionTutorial}}\r\n\r\n\r\n## 专项工具\r\n\r\n<div id=\"specialty-tool-graph-detail\"></div>\r\n\r\n{{specialTool}}\r\n\r\n## 学习资源\r\n\r\n<div id=\"learning-resource-graph-detail\"></div>\r\n\r\n{{learningResource}}\r\n\r\n## 参考文献\r\n\r\n<div id=\"reference-graph-detail\"></div>\r\n\r\n<Reference>\r\n  {{reference}}\r\n</Reference>\r\n\r\n## 贡献者\r\n\r\n<div id=\"contributor-graph-detail\"></div>\r\n\r\n<!-- 默认读取github commit记录，非commit可以在data中可以自定义 -->\r\n\r\n{{contributors}}\r\n`","\r\n/**\r\n * \r\n * @param {string} string \r\n * @returns {(data?: any) => string}\r\n * @example\r\n * template('I am {{name}}')({name: 'Super man'}) \r\n * // => 'I am Super man'\r\n * var compiled = template('I am {{name}}')\r\n * compiled({name: 'Super man'})\r\n * // => 'I am Super man'\r\n */\r\nfunction template(string: string, interpolate: RegExp = /\\{\\{([\\s\\S]+?)\\}\\}/g) {\r\n    return function(data: Record<string, any>) {\r\n        return string.replace(interpolate, function(match, $1) {\r\n            const key = $1\r\n            if (data[key] == null) {\r\n                return match\r\n            }\r\n            return data[key]\r\n        });\r\n    }\r\n}\r\nexport default template","import React, { useEffect, useMemo } from \"react\";\nimport { render } from \"react-dom\";\n\nimport MDX from \"@mdx-js/runtime\";\nimport { Editor, Viewer } from '@bytemd/react'\nimport { Input, Spin, Button, Space, notification, Modal } from 'antd';\nimport frontmatter from '@bytemd/plugin-frontmatter'\nimport gfm from '@bytemd/plugin-gfm'\nimport highlight from '@bytemd/plugin-highlight';\nimport { ChartKnowledgeJSON, FAMILY_OPTIONS, addChart, TransKnowledgeProps, ChartKnowledge } from '@antv/knowledge';\n// import GitHub from 'github-api';\n\n// 设计案例\nimport DesignCase from './components/DesignCase';\n// 制作教程\nimport { ProductionTutorials } from './components/ProductionTutorials';\n// 参考文献\nimport { Reference } from './components/Reference';\n// 贡献者\nimport { Contributors } from './components/Contributors';\nimport { SimilarCharts } from './components/SimilarCharts'\nimport { ChartProps } from './components/ChartProps'\nimport { uploadImg, uploadURL } from \"./api/upload\";\nimport { mdxString, templateString } from \"./template/template\";\nimport exportFile from \"./utils/exportFile\";\nimport template from \"./utils/template\";\nimport { getStyles, toHump } from \"./utils\";\nimport { CKBJson, mergeChartProps } from \"./components/CBKSelect/addChart\";\n// import test from \"./components/Editor/plugins/test\";\nimport './document.css';\n\nimport './App.css'\nimport { OldPostConverter } from \"./template/old-post-converter\";\nimport ChartPropsEidtor, { ChartKnowledgeEdit } from \"./components/ChartProps/ChartProps\";\nimport axios from \"axios\";\nimport { initOctokit, REPO } from \"./utils/Octokit\";\n\nconst PlaceHolder: React.FC<any> = ({ children }) => {\n  return <em style={{ opacity: 0.65 }}>{children}</em>;\n}\n\n// Provide custom components for markdown elements\nconst components = {\n  PlaceHolder,\n  DesignCaseContainer: DesignCase.Container,\n  DesignCaseItem: DesignCase.Item,\n  ProductionTutorials,\n  Reference,\n  Contributors,\n  SimilarCharts,\n  ChartProps,\n};\n// Provide variables that might be referenced by JSX\nconst scope = {\n  some: \"value\"\n};\n\nconst plugins =[\n  frontmatter(),\n  gfm(),\n  highlight(),\n  // test(),\n]\n\n\nexport let zhCompletedKB = CKBJson(\"zh-CN\");\n\n\nfunction App() {\n  const searchParams = new URL(window.location.href).searchParams;\n  let filePath = searchParams.get('file-path') ? decodeURIComponent(searchParams.get('file-path') as string) : ''\n  const [content, setContent] = React.useState(template(mdxString)({\n    name: '面积图',\n    enName: 'Area Chart'\n  }));\n  const [sha, setSha] = React.useState('');\n  const [loading, setLoading] = React.useState(false);\n  const [chartPropsModalVisible, setChartPropsModalVisible] = React.useState(searchParams.get('action') === 'new' ? true : false);\n  const [chartInfo, setChartInfo] = React.useState<{chartKnowledge: ChartKnowledgeJSON, trans?: Record<string, any>}>();\n  const [chartPropsList, setChartPropsList] = React.useState<Record<string, any>[]>([]);\n  const octokit = initOctokit();\n  useEffect(() => {\n    if (filePath) {\n      setLoading(true)\n      octokit.getFile({\n        path: filePath.includes('.mdx') ? filePath : `${filePath}.mdx`,\n      }).then((file) => {\n        if (file.content) {\n          setContent(file.content)\n          setSha(file.sha)\n        }\n      }).catch((error) => {\n        notification.error({message: error.message})\n      }).finally(() => {\n        setLoading(false)\n      })\n    }\n    mergeChartPropsFromGithub();\n\n    // OldPostConverter().then((str: string) => {\n    //   setContent(str)\n    // })\n  }, [])\n  const mergeChartPropsFromGithub = async () => {\n    try {\n      const file = await octokit.getFile({\n        path: 'src/constants/props.ts',\n      })\n      if (file.content) {\n        const content = file.content.replace('export const chartKnowledges = ','')\n        const list = eval(content)\n        if (Array.isArray(list)) {\n          mergeChartProps(list);\n          setChartPropsList(list);\n          zhCompletedKB = CKBJson(\"en-US\");\n\n          if (filePath) {\n            const paths = decodeURIComponent(filePath).replace(/\\/?charts\\//, '');\n            if (paths && zhCompletedKB[paths]) {\n              setChartInfo({chartKnowledge: zhCompletedKB[paths]})\n            }\n          }\n\n        }\n      }\n    } catch (error: any) {\n      console.error(error)\n      notification.error({message: error.message})\n    }\n  \n\n  }\n  // @ts-ignore\n  const onChange = (newValue: string) => {\n    // cssText -> cssPrototype\n    const replaceValue = newValue.replace(/style=\"([\\d\\w\\s,:;\\\\(\\\\)-]*)\"/ig, (match, $1) => {\n      if ($1) {\n        return `style={${JSON.stringify(getStyles($1))}}`\n      }\n      return match\n    })\n    setContent(replaceValue);\n  };\n  const uploadImages = async (files: File[]) => {\n\n    const file = files[0];\n    if (!file) {\n      return []\n    }\n    const result = await uploadImg({smfile: file})\n\n    const imgList = []\n    for (const name in result) {\n      if (Object.prototype.hasOwnProperty.call(result, name)) {\n        const url: string = result[name];\n        imgList.push({title: file.name, alt: file.name, url: url.replace('https:', '')})\n      }\n    }\n    return imgList\n  }\n  const handleRepalceAllImg = async () => {\n    const imgReg = /http:\\/\\/\\S*((\\.png)|(\\.jpeg)|(\\.gif))/g;\n    const matchList = content.match(imgReg)\n    if (!Array.isArray(matchList)) {\n      return\n    }\n    let newCotnet = content\n    let preUrl = ''\n    for (const url of matchList) {\n      setLoading(true)\n      try {\n        const result = await uploadURL([url])\n        for (const oldURL in result) {\n          if (Object.prototype.hasOwnProperty.call(result, oldURL)) {\n            const newUrl = result[oldURL].replace('https:', '');\n            if (preUrl === newUrl) {\n              throw Error('替换出错')\n            }\n            newCotnet = newCotnet.replace(oldURL, newUrl)\n            preUrl = newUrl\n          }\n        }\n        setContent(newCotnet)\n        setLoading(false)\n        notification.success({\n          message: `替换成功`,\n          description: `${url}`,\n        })\n      } catch (error) {\n        notification.warn({\n          message: `替换失败`,\n          description: `${url}`,\n        })\n        setLoading(false)\n      }\n    }\n  } \n\n  const openModal = () => {\n    filePath = ''\n    const u = new URL(window.location.href);\n    u.searchParams.delete('file-path')\n    // window.location.search = searchParams.toString()\n    window.history.replaceState(null, '', u.href)\n    setChartPropsModalVisible(true);\n  }\n  \n  const downloadFile = () => {\n    if (chartInfo) {\n      exportFile(content, `${chartInfo.chartKnowledge.id}.mdx`)\n    }\n  }\n  const handleScroll = (e: any) => {\n    console.log(e)\n  }\n\n\n  const submitRepo = async () => {\n    let commitMsg = ''\n    Modal.confirm({\n      title: 'Commit and fork',\n      content: <>\n        <Input addonBefore=\"docs: \"   placeholder=\"commit message\" onChange={(e) => {\n          commitMsg = e.currentTarget.value\n        }} />\n        <p style={{fontSize: 12, marginTop: 10}}>将会先fork一份到自己仓库，然后向<a href=\"https://github.com/Plothis/gradict-charts-doc\" target=\"_blank\" rel=\"noreferrer\">github.com/Plothis/gradict-charts-doc</a>发起PR</p>\n      </>,\n      onOk: async () => {\n        const forkData = await octokit.forkRepo();\n        const searchParams = new URL(window.location.href).searchParams;\n        filePath = searchParams.get('file-path') ? decodeURIComponent(searchParams.get('file-path') as string) : ''\n\n        if (!forkData.owner) {\n          notification.error({\n            message: 'fork失败，稍后尝试',\n          })\n          return\n        }\n\n        if (filePath && filePath.includes('charts') && sha) {\n          await octokit.pushFile({\n            sha: sha,\n            owner: forkData.owner.login,\n            repo: forkData.owner.name || REPO,\n            path: filePath.includes('.mdx') ? filePath : `${filePath}.mdx`,\n            content: content,\n            message: `docs: ${commitMsg}`,\n          })\n        } else {\n          await octokit.pushFile({\n            owner: forkData.owner.login,\n            repo: forkData.owner.name || REPO,\n            path: `charts/${chartInfo?.chartKnowledge.name}.mdx`,\n            content: content,\n            message: `docs: ${commitMsg}`,\n          })\n     \n          const index = chartPropsList.findIndex((item) => item.id === chartInfo?.chartKnowledge.id)\n          if (index === -1) {\n            const file = await octokit.getFile({\n              path: 'src/constants/props.ts',\n            })\n            if (file.sha) {\n              chartPropsList.push({\n                chartKnowledge: chartInfo?.chartKnowledge,\n                trans: chartInfo?.trans ? chartInfo.trans : {\n                  'zh-CN': {\n                      name: '',\n                      alias: [],\n                      def: '',\n                  }\n                }\n              })\n              await octokit.pushFile({\n                sha: file.sha,\n                owner: forkData.owner.login,\n                repo: forkData.owner.name || REPO,\n                path: 'src/constants/props.ts',\n                content: `export const chartKnowledges = ${JSON.stringify(chartPropsList, null, 4)}`,\n                message: `docs: add props`,\n              })\n            }\n          }\n        }\n  \n        await octokit.createPullRequest(forkData.owner.login)\n        notification.success({message: <>提交成功 <a href=\"https://github.com/Plothis/gradict-charts-doc/pulls\" target=\"_blank\" rel=\"noreferrer\">github.com/Plothis/gradict-charts-doc/pulls</a></>})\n      },\n      onCancel() {\n        console.log('Cancel');\n      },\n    });\n \n    \n    // await octokit.createPullRequest(forkData.owner.login)\n  }\n  const handleChartPropsChange = (values: ChartKnowledgeEdit) => {\n    const {cnName, cnAlias, cnDef, ...chartKnowledge } = values;\n    const trans = {\n      'zh-CN': {\n        name: cnName,\n        alias: cnAlias ?? [],\n        def: cnDef ?? ''\n      }\n    }\n\n    try {\n\n      setChartInfo({chartKnowledge: chartKnowledge, trans: trans})\n\n      // addChart(chartKnowledge as ChartKnowledge, trans as Record<string, TransKnowledgeProps>)\n\n      const compiled = template(templateString);\n      setContent(compiled({\n        name: cnName,\n        enName: toHump(chartKnowledge.name),\n        representativePicture: '//i.ibb.co/QdxRXkp/346ff944cb6911dc5521095aa5a6008f.png',\n        overview: 'overview text',\n        constitution: 'text text',\n        appropriateScene: 'text text',\n        unAppropriateScene: 'text text',\n        reference: '1. HIGHCHARTS. (n.d.). 包含负值的面积图. [online]. Available at: https://www.hcharts.cn/demo/highcharts/area-negative [Accessed 25 January 2019].',\n        learningResource: 'text text',\n        specialTool: '（1）[meta chart在线生成](<https://www.meta-chart.com/>)',\n        usageScene: 'text text',\n        DesignCase: `<DesignCaseItem\n  description=\"潮汐预测，采用不规则的坐标系，使用海蓝色为基础色调进行配色，通过透明度的调整使图形更富有美感。\"\n  link=\"http://www.joanangdesign.com/\"\n  image=\"//i.ibb.co/QdxRXkp/346ff944cb6911dc5521095aa5a6008f.png\"\n/>`,\nproductionTutorial: `<ProductionTutorials\n  data={${JSON.stringify({\n    \"BI工具\": {},\n    \"代码库\": {\n      \"ECharts\": [\n        {\n          \"linkText\": \"官方实例\",\n          \"link\": \"https://echarts.baidu.com/examples/editor.html?c=area-basic\"\n        }\n      ],\n    },\n    \"设计工具\": {}\n  }, null, 2)}}\n/>`,\ncontributors: `<Contributors\n  merge\n/>\n`\n      }));\n\n      setChartPropsModalVisible(false);\n    } catch (error) {\n      \n    }\n    \n  }\n\n  return (\n    <div>\n      <div  style={{height: 10}}/>\n      <Space style={{marginLeft: 10}}>\n \n        <Button onClick={openModal} type=\"primary\" >新建模板</Button>\n        <Button onClick={downloadFile} type=\"primary\" disabled={chartInfo === undefined} >下载mdx文件</Button>\n        <Button onClick={submitRepo} type=\"primary\" disabled={chartInfo === undefined} >提交文件</Button>\n\n        <Button onClick={handleRepalceAllImg} loading={loading}>图片链接替换(http-&gt;https)</Button>\n        <span style={{fontSize: 12}}>本页面会请求api.github.com</span>\n      </Space>\n      <div  style={{height: 10}}/>\n      <Spin spinning={loading}>\n        <Editor\n          mode=\"auto\"\n          value={content}\n          onChange={onChange}\n          uploadImages={uploadImages}\n          plugins={plugins}\n      \n          overridePreview={(el, props) => { \n            render(\n              <div className=\"markdown-body chart-container pg-chart\">\n                <MDX scope={scope} components={components}>{props.value}</MDX>  \n              </div>\n            , el)\n          }}\n        />\n      </Spin>\n      <ChartPropsEidtor\n        visible={chartPropsModalVisible}\n        onVisibleChange={setChartPropsModalVisible}\n        onOk={handleChartPropsChange}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","// @ts-nocheck\nimport React from 'react';\nimport styled from 'styled-components';\n\nconst Table = styled.table`\n  border-collapse: collapse;\n  width: 100%;\n  table-layout: fixed;\n`;\n\nconst Td = styled.td`\n  border: 1px solid #d0d0d0;\n  padding: 10px 10px;\n  text-align: center;\n  color: #4a4a4a;\n`;\n\ntype ToolItem = {\n  readonly link?: string;\n  readonly linkText: string;\n}\n\ninterface Props {\n  data: Record<string, Record<string, ToolItem[]>>\n}\n\nexport const ProductionTutorials: React.FC<Props> = ({ data }) => {\n  const newTableData = handleTableData(data || {});\n  return (\n    <Table>\n      <tbody>{newTableData.map((item, i) => renderTR(item, i))}</tbody>\n    </Table>\n  );\n}\n\nfunction renderTR(item, index) {\n  const columnOne = item.columnOne ? (\n    <Td width=\"25%\" rowSpan={item.columnOne.rowSpan}>\n      {item.columnOne.text}\n    </Td>\n  ) : null;\n\n  const columnTwo = item.columnTwo ? (\n    <Td width=\"25%\" rowSpan={item.columnTwo.rowSpan}>\n      {item.columnTwo.text}\n    </Td>\n  ) : null;\n\n  const columnThree = (\n    <Td width=\"50%\" style={{ textAlign: 'left', paddingLeft: '15px' }}>\n      {item.columnThree.link ? (\n        <a href={item.columnThree.link} style={{ textDecoration: 'underline', color: '#4a4a4a' }} target=\"__blank\">\n          {item.columnThree.linkText}\n        </a>\n      ) : (\n          item.columnThree.linkText\n        )}\n    </Td>\n  );\n\n  return (\n    <tr style={item.background ? { background: '#f6f6f6' } : null} key={index}>\n      {columnOne}\n      {columnTwo}\n      {columnThree}\n    </tr>\n  );\n}\n\n\nfunction handleTableData(data: Props['data']) {\n  let result = [];\n  let background = 0;\n  const newData = Object.keys(data).map((key) => ({\n    text: key,\n    children: data[key]\n  }));\n\n  newData.forEach((group) => {\n    let length = 0;\n    const newGroup = Object.keys(group.children).map((key) => {\n      var subLength;\n      // 插入空数据的文本，计算长度\n      if (group.children[key].length === 0) {\n        group.children[key] = [{ linkText: '--' }];\n        subLength = 1;\n      } else {\n        subLength = group.children[key].length;\n      }\n      length += subLength;\n      return {\n        text: key,\n        children: group.children[key],\n        length: subLength\n      };\n    });\n\n    // 每一大类的数据\n    var groupData = [];\n    // 每一大类的背景色不同\n    background = 1 - background;\n    newGroup.forEach((item, i) => {\n      item.children.forEach((subItem, j) => {\n        if (j === 0) {\n          if (i === 0) {\n            // 大类第一项，含有三列\n            groupData.push({\n              columnOne: {\n                rowSpan: length,\n                text: group.text\n              },\n              columnTwo: {\n                rowSpan: item.length,\n                text: item.text\n              },\n              columnThree: subItem,\n              background: background\n            });\n          } else {\n            // 小类第一项，含有两列\n            groupData.push({\n              columnTwo: {\n                rowSpan: item.length,\n                text: item.text\n              },\n              columnThree: subItem,\n              background: background\n            });\n          }\n        } else {\n          // 最后一列\n          groupData.push({\n            columnThree: subItem,\n            background: background\n          });\n        }\n      });\n    });\n\n    // TODO 这一页的类型待补全\n    result = result.concat(groupData);\n    Object.assign(group, {\n      children: newGroup,\n      length: length\n    });\n    // group.children = newGroup;\n    // group.length = length;\n  });\n  return result;\n}\n","// @ts-nocheck\nimport React, { useState } from 'react';\nimport { animated, useSpring } from 'react-spring';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\n\nconst Container = styled.div`\n  position: relative;\n  ol li {\n    color: rgb(187, 187, 187);\n  }\n`;\n\nconst ShowAllButton = styled.div`\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 50px;\n  display: flex;\n  align-items: flex-end;\n  background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(255, 255, 255, 0.8) 30%, rgba(255, 255, 255, 1));\n`;\n\nexport const Reference: React.FC = ({ children }) => {\n  const [show, setShow] = useState<boolean>(false);\n\n  const [props, set] = useSpring(() => ({\n    config: { tension: 1000, friction: 100, precision: 1 },\n    to: { height: 300, overflow: 'hidden' }\n  }));\n\n  const showAll = () => {\n    setShow(true);\n    set({ to: { height: 'auto' } });\n  };\n\n  return (\n    <Container>\n      <animated.div className=\"reference\" style={props}>{children}</animated.div>\n      {show ? null : (\n        <ShowAllButton onClick={showAll}>\n          <Button style={{ color: '#343E73' }}>[ 查看所有 ]</Button>\n        </ShowAllButton>\n      )}\n    </Container>\n  );\n};","// @ts-nocheck\nimport React from 'react';\nimport styled from 'styled-components';\nimport { Popover } from 'antd';\nimport { size } from 'lodash';\nimport dayjs from 'dayjs';\n\nconst ContributeName = styled.span`\nmargin: 0 10px;\n`;\n\n// TODO antd v4 popover 没办法自己消失了...\nexport const Contributors = ({ data = {} }) => {\n  return (\n    <div style={{ marginBottom: '18px' }}>\n      {Object.keys(data).map((key, i) => {\n        const info = data[key];\n\n        const contentEl = (\n          <>\n            {info.map((item, index) => {\n              const date = typeof item.date === 'number' ? dayjs(item.date).format('YYYY-MM-DD') : item.date;\n              return <div key={index}>{date} {item.content}</div>\n            })}\n          </>\n        );\n        return (\n          <span key={i}>\n            <Popover trigger=\"hover\" placement=\"right\" content={contentEl}>\n              <ContributeName>{key}</ContributeName>\n            </Popover>\n            {size(data) !== i + 1 && '  •  '}\n          </span>\n        );\n      })}\n    </div>\n  );\n};","import React, { useState } from 'react';\r\n\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n  position: relative;\r\n  marginBottom: '18px'\r\n\r\n`;\r\n\r\nexport const SimilarCharts: React.FC = ({ children }) => {\r\n  return (\r\n    <Container>\r\n      <i>此处会自动识别</i>\r\n     \r\n    </Container>\r\n  );\r\n};","/**\n * 文本内容导出文件\n * 支持JSON, html\n */\nexport default function exportFile(content: string, fileName: string) {\n    // 创建隐藏的可下载链接\n    const eleLink = document.createElement('a');\n    eleLink.download = fileName;\n    eleLink.style.display = 'none';\n    // 字符内容转变成blob地址\n    const blob = new Blob([content]);\n    eleLink.href = URL.createObjectURL(blob);\n    // 触发点击\n    document.body.appendChild(eleLink);\n    eleLink.click();\n    // 然后移除\n    document.body.removeChild(eleLink);\n}\n","import Cookies from 'js-cookie';\r\nimport request, { checkResult } from '../utils/request';\r\n\r\nconst prefix2 = '//api.8and1.cn/mdx-editor/v1';\r\n// const prefix2 = '//192.168.1.4:7001/api/v1';\r\n\r\nexport async function getUser(): Promise<any> {\r\n    return request({\r\n        url: `https://api.github.com/user`,\r\n        headers: {\r\n            Authorization: `Bearer ${ Cookies.get('github-token')}`\r\n        }\r\n    })\r\n}\r\n\r\nexport function loginOAuth(code: string) {\r\n    return request<{\r\n        access_token: string\r\n        scope: string\r\n        token_type: string\r\n    }>({\r\n      method: \"GET\",\r\n      url: `${prefix2}/github/oauth?code=${code}`,\r\n    }).then(checkResult);\r\n}\r\n","/**\r\n * 单例 promise版\r\n * @param p\r\n * @param getKey 从参数里取一个直用于缓存该请求是否合并\r\n * @example\r\n * const getProjectSingle =  singlePromise(getProject, (projectId) => projectId)\r\n * /// 3合一\r\n * getProjectSingle('1');\r\n * getProjectSingle('1');\r\n * getProjectSingle('1');\r\n * /// 参数不一致，会发出\r\n * getProjectSingle('2');\r\n */\r\n export function singlePromise<T extends (...arg: any[]) => Promise<any>>(p: T, getKey: (...arg: Parameters<T>) => string | number) {\r\n    const cache: Record<string, Promise<any> | undefined> = {}\r\n    return (...arg: Parameters<T>): ReturnType<T> => {\r\n      const key = getKey(...arg)\r\n      if (cache[key]) {\r\n        return cache[key] as ReturnType<T>\r\n      }\r\n      cache[key] = p(...arg).finally(() => {\r\n        delete cache[key]\r\n      })\r\n      return cache[key] as ReturnType<T>\r\n    }\r\n}\r\n  \r\n","import React from \"react\";\r\nimport { Select } from \"antd\";\r\n\r\nexport type OptionType =  {\r\n  path: string;\r\n  name: string;\r\n}\r\nconst { Option } = Select;\r\n\r\nconst CBKSelect: React.FC<{ options: OptionType[], onChange: (data: string) => void }> = (\r\n  props\r\n) => {\r\n  function onChange(value: string) {\r\n    props.onChange(value);\r\n  }\r\n\r\n  function onBlur() {}\r\n\r\n  function onFocus() {}\r\n\r\n  function onSearch(val: string) {}\r\n\r\n  return (\r\n    <Select\r\n      showSearch\r\n\r\n      placeholder=\"请选择一个模板\"\r\n      optionFilterProp=\"children\"\r\n      onChange={onChange}\r\n      onFocus={onFocus}\r\n      onBlur={onBlur}\r\n      onSearch={onSearch}\r\n      filterOption={(input, option) => {\r\n        const str =\r\n          option && Array.isArray(option.children)\r\n            ? option.children.toString() as string\r\n            : (option?.children || '') as string;\r\n        return str.toLowerCase().indexOf(input.toLowerCase()) >= 0;\r\n      }}\r\n    >\r\n      {props.options.map((item) => {\r\n        return (\r\n          <Option key={item.path} value={item.path}>\r\n            {item.name}-{item.path}\r\n          </Option>\r\n        );\r\n      })}\r\n    </Select>\r\n  );\r\n};\r\n\r\nexport default CBKSelect;\r\n","import type { InputRef } from 'antd';\r\nimport { Input, Tag, Tooltip } from 'antd';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\n\r\ninterface Props {\r\n  value?: string[]\r\n  onChange?: (values: string[]) => void;\r\n}\r\n\r\nexport const EditableTagGroup: React.FC<Props> = (props) => {\r\n  const [tags, setTags] = useState<string[]>(props.value || []);\r\n  const [inputVisible, setInputVisible] = useState(false);\r\n  const [inputValue, setInputValue] = useState('');\r\n  const [editInputIndex, setEditInputIndex] = useState(-1);\r\n  const [editInputValue, setEditInputValue] = useState('');\r\n  const inputRef = useRef<InputRef>(null);\r\n  const editInputRef = useRef<InputRef>(null);\r\n\r\n  useEffect(() => {\r\n    if (props.value) {\r\n      setTags(props.value)\r\n    }\r\n  }, [props.value]);\r\n\r\n  useEffect(() => {\r\n    if (inputVisible) {\r\n      inputRef.current?.focus();\r\n    }\r\n  }, [inputVisible]);\r\n\r\n  useEffect(() => {\r\n    editInputRef.current?.focus();\r\n  }, [inputValue]);\r\n  \r\n  const handleChange = (tags: string[]) => {\r\n    if (props.onChange) {\r\n      props.onChange(tags)\r\n    }\r\n  };\r\n  const handleClose = (removedTag: string) => {\r\n    const newTags = tags.filter(tag => tag !== removedTag);\r\n\r\n    handleChange(newTags);\r\n  };\r\n\r\n  const showInput = () => {\r\n    setInputVisible(true);\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setInputValue(e.target.value);\r\n  };\r\n\r\n  const handleInputConfirm = () => {\r\n    if (inputValue && tags.indexOf(inputValue) === -1) {\r\n      handleChange([...tags, inputValue]);\r\n    }\r\n    setInputVisible(false);\r\n    setInputValue('');\r\n  };\r\n\r\n  const handleEditInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setEditInputValue(e.target.value);\r\n  };\r\n\r\n  const handleEditInputConfirm = () => {\r\n    const newTags = [...tags];\r\n    newTags[editInputIndex] = editInputValue;\r\n    setTags(newTags);\r\n    setEditInputIndex(-1);\r\n    setInputValue('');\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {tags.map((tag, index) => {\r\n        if (editInputIndex === index) {\r\n          return (\r\n            <Input\r\n              ref={editInputRef}\r\n              key={tag}\r\n              size=\"small\"\r\n              className=\"tag-input\"\r\n              value={editInputValue}\r\n              onChange={handleEditInputChange}\r\n              onBlur={handleEditInputConfirm}\r\n              onPressEnter={handleEditInputConfirm}\r\n            />\r\n          );\r\n        }\r\n\r\n        const isLongTag = tag.length > 20;\r\n\r\n        const tagElem = (\r\n          <Tag\r\n            className=\"edit-tag\"\r\n            key={tag}\r\n            closable={index !== 0}\r\n            onClose={() => handleClose(tag)}\r\n          >\r\n            <span\r\n              onDoubleClick={e => {\r\n                if (index !== 0) {\r\n                  setEditInputIndex(index);\r\n                  setEditInputValue(tag);\r\n                  e.preventDefault();\r\n                }\r\n              }}\r\n            >\r\n              {isLongTag ? `${tag.slice(0, 20)}...` : tag}\r\n            </span>\r\n          </Tag>\r\n        );\r\n        return isLongTag ? (\r\n          <Tooltip title={tag} key={tag}>\r\n            {tagElem}\r\n          </Tooltip>\r\n        ) : (\r\n          tagElem\r\n        );\r\n      })}\r\n      {inputVisible && (\r\n        <Input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          size=\"small\"\r\n          className=\"tag-input\"\r\n          value={inputValue}\r\n          onChange={handleInputChange}\r\n          onBlur={handleInputConfirm}\r\n          onPressEnter={handleInputConfirm}\r\n        />\r\n      )}\r\n      {!inputVisible && (\r\n        <Tag className=\"site-tag-plus\" onClick={showInput}>\r\n          + New Tag\r\n        </Tag>\r\n      )}\r\n    </>\r\n  );\r\n};","import { Family, Purpose, GraphicCategory, Shape, DataPrerequisite, FAMILY_OPTIONS, PURPOSE_OPTIONS, GRAPHIC_CATEGORY_OPTIONS, SHAPE_OPTIONS } from \"@antv/knowledge\";\r\nimport { translateMapping } from \"@antv/knowledge/lib/i18n\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Form, Input, Modal, Button, Select, message } from 'antd';\r\nimport { TranslateList } from \"@antv/knowledge/lib/i18n/interface\";\r\nimport CBKSelect, { OptionType as CkbOptionsOptionType } from \"../CBKSelect\";\r\nimport { EditableTagGroup } from \"./EditableTagGroup\";\r\nimport { CKBJson } from '../CBKSelect/addChart';\r\n\r\n\r\nconst { concepts } = translateMapping['zh-CN'] as TranslateList;\r\nconst { Option } = Select;\r\nconst layout = {\r\n    labelCol: { span: 4 },\r\n    wrapperCol: { span: 18 },\r\n};\r\n\r\n\r\nexport type ChartKnowledgeEdit = {\r\n    id: string;\r\n    name: string;\r\n    cnName: string;\r\n    alias: string[];\r\n    cnAlias: string[];\r\n    family: Family[];\r\n    def: string;\r\n    cnDef: string;\r\n    purpose: Purpose[];\r\n    coord: [];\r\n    category: GraphicCategory[];\r\n    shape: Shape[];\r\n    dataPres: DataPrerequisite[];\r\n    channel: (\"Area\" | \"Position\" | \"Length\" | \"Color\" | \"Angle\" | \"ArcLength\" | \"Direction\" | \"Size\" | \"Opacity\" | \"Stroke\" | \"LineWidth\" | \"Lightness\")[], \r\n    recRate: \"Recommended\" | \"Use with Caution\" | \"Not Recommended\"\r\n};\r\n\r\ntype TransKnowledgeProps = {\r\n    name: string;\r\n    alias: string[];\r\n    def: string;\r\n};\r\n\r\ninterface Props {\r\n    onOk: (value: any) => void\r\n    onVisibleChange: (v: boolean) => void\r\n    visible: boolean\r\n}\r\n\r\nconst validateMessages = {\r\n    // eslint-disable-next-line\r\n    required: '${label} is required!',\r\n    types: {\r\n        // eslint-disable-next-line\r\n        email: '${label} is not a valid email!',\r\n        // eslint-disable-next-line\r\n        number: '${label} is not a valid number!',\r\n    },\r\n    number: {\r\n        // eslint-disable-next-line\r\n        range: '${label} must be between ${min} and ${max}',\r\n    },\r\n};\r\n\r\nconst ChartPropsEidtor: React.FC<Props> = (props) => {\r\n\r\n    const [zhCompletedKB, setZhCompletedKB] = useState(CKBJson(\"zh-CN\"));\r\n    const [visible, setVisible] = useState(props.visible);\r\n    const [form] = Form.useForm();\r\n    useEffect(() => {\r\n        form.setFieldsValue({\r\n            \"name\": \"test\",\r\n            \"cnName\": \"test\",\r\n            \"family\": [\r\n                \"LineCharts\",\r\n                \"ColumnCharts\"\r\n            ],\r\n            \"purpose\": [\r\n                \"Hierarchy\"\r\n            ],\r\n            \"category\": [\r\n                \"Statistic\"\r\n            ],\r\n            \"shape\": [\r\n                \"Lines\"\r\n            ],\r\n            // dataPres: [{ minQty: 1, maxQty: 1, fieldConditions: [\"Interval\"] }]\r\n        })\r\n    }, [form]);\r\n    useEffect(() => {\r\n        setVisible(props.visible);\r\n        if (props.visible) {\r\n            setZhCompletedKB(CKBJson(\"zh-CN\"));\r\n        }\r\n    }, [props.visible]);\r\n    \r\n    const onFinish = (values: ChartKnowledgeEdit) => {\r\n        const id = values.name.trim().replace(/[A-Z]/g, function(matchstr, index: number) {\r\n            return matchstr ? matchstr.toLowerCase() : matchstr\r\n        }).replace(/\\s/g, '_')\r\n        if (zhCompletedKB[id]) {\r\n            message.error(`${values.name}已存在`)\r\n            return\r\n        }\r\n        values.id = id;\r\n        // 暂时写死\r\n        values.recRate = \"Not Recommended\"\r\n        values.channel = [] as any\r\n        if (values.alias == null) {\r\n            values.alias = []\r\n        }\r\n    \r\n        props.onOk(values);\r\n        handleVisibleChange(false);\r\n    };\r\n    const handleVisibleChange = (v:boolean) => {\r\n        if (props.onVisibleChange) {\r\n            props.onVisibleChange(v);\r\n        }\r\n    }\r\n    const handleOk = () => {\r\n        form.submit();\r\n    }\r\n    const handleCancel = () => {\r\n        handleVisibleChange(false);\r\n        form.resetFields();\r\n    }\r\n    const handleTemplateSelectChange = (name: string) => {\r\n\r\n        const data = CKBJson('en-US')[name]\r\n\r\n        const cnData = zhCompletedKB[name];\r\n        // console.log({\r\n        //     ...data,\r\n        //     cnName: cnData.name,\r\n        //     cnAlias: cnData.alias,\r\n        // })\r\n        // setChartInfo(data);\r\n        form.setFieldsValue({\r\n            ...data,\r\n            cnName: cnData.name,\r\n            cnAlias: cnData.alias,\r\n        })\r\n    }\r\n    const ckbOptions: CkbOptionsOptionType [] = [];\r\n    for (const key in zhCompletedKB) {\r\n        const chartInfo = zhCompletedKB[key];\r\n\r\n        const { category, purpose, shape, family, name, id } = chartInfo;\r\n        ckbOptions.push({\r\n            path: key,\r\n            name: name,\r\n        });\r\n    }  \r\n\r\n    return (\r\n        <Modal title=\"\" visible={visible} onOk={handleOk} onCancel={handleCancel} width=\"700px\">\r\n            <Form {...layout} name=\"nest-messages\" form={form} onFinish={onFinish} validateMessages={validateMessages}>\r\n                \r\n                <Form.Item label=\"选择模板\" help=\"没有的话需要手动填写下面表单\">\r\n                    <CBKSelect options={ckbOptions} onChange={handleTemplateSelectChange} />\r\n                </Form.Item>\r\n                \r\n                <Form.Item name={'name'} label=\"Name\" rules={[{ required: true }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name={'cnName'} label=\"中文名\" rules={[{ type: 'string', required: true }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                \r\n                <Form.Item name={'alias'} label=\"alias\" rules={[{ type: 'array' }]} >\r\n                    <EditableTagGroup  />\r\n                </Form.Item>\r\n                <Form.Item name={'cnAlias'} label=\"中文别名\" rules={[{ type: 'array' }]} >\r\n                    <EditableTagGroup  />\r\n                </Form.Item>\r\n                <Form.Item name={'def'} label=\"def\" rules={[{ type: 'string' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name={'cnDef'} label=\"中文描述\" rules={[{ type: 'string' }]}>\r\n                    <Input />\r\n                </Form.Item>\r\n                <Form.Item name={'family'} label=\"Family\" rules={[{ type: 'array', min: 1, max: 99, required: true }]}>\r\n                    <Select mode=\"multiple\" placeholder=\"Select family\">\r\n                        {\r\n                            FAMILY_OPTIONS.map((name) => {\r\n                                return <Option value={name} key={name}>{name} - {concepts.family[name]}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name={'purpose'} label=\"Purpose\" rules={[{ type: 'array', min: 1, max: 99, required: true }]}>\r\n                    <Select mode=\"multiple\" placeholder=\"Select purpose\">\r\n                        {\r\n                            PURPOSE_OPTIONS.map((name) => {\r\n                                return <Option value={name} key={name}>{name} - {concepts.purpose[name]}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name={'category'} label=\"Category\" rules={[{ type: 'array', min: 1, max: 99, required: true }]}>\r\n                    <Select mode=\"multiple\" placeholder=\"Select category\">\r\n                        {\r\n                            GRAPHIC_CATEGORY_OPTIONS.map((name) => {\r\n                                return <Option value={name} key={name}>{name} - {concepts.category[name]}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n                <Form.Item name={'shape'} label=\"Shape\" rules={[{ type: 'array', min: 1, max: 99, required: true }]}>\r\n                    <Select mode=\"multiple\" placeholder=\"Select shape\">\r\n                        {\r\n                            SHAPE_OPTIONS.map((name) => {\r\n                                return <Option value={name} key={name}>{name} - {concepts.shape[name]}</Option>\r\n                            })\r\n                        }\r\n                    </Select>\r\n                </Form.Item>\r\n            </Form>\r\n        </Modal>\r\n    )\r\n}\r\n\r\nexport default ChartPropsEidtor;","import React from 'react';\r\n\r\n\r\nexport interface ChartInfo {\r\n    name: string\r\n    image: string\r\n    path: string\r\n    /** 常用使用这个字段 */\r\n    family: string[]\r\n    /** 形状 */\r\n    shape: string[]\r\n    /** 图类 */\r\n    category: string[]\r\n    /** 用途 */\r\n    purpose: string[]\r\n    /**\r\n     * 便于搜索\r\n     * $searchMap: { 类型-属性值: 1 }\r\n     */\r\n    $searchMap: Record<string, number>\r\n}\r\n\r\n  \r\nexport const ChartContext = React.createContext<{\r\n    chartList: ChartInfo[];\r\n    currentChart: ChartInfo | null;\r\n}>({\r\n    chartList: [],\r\n    currentChart: null,\r\n});\r\n\r\n ","import React, { useContext } from 'react';\r\n\r\nimport { ChartContext } from './context';\r\n\r\n\r\nexport const ChartProps: React.FC<{ name: string }> = (props) => {\r\n  const { currentChart } = useContext(ChartContext);\r\n  let propsMap: Record<string, string[]> = {}\r\n  if (currentChart) {\r\n    propsMap = {\r\n      '形状': currentChart.shape,\r\n      '图类': currentChart.category,\r\n      '功能': currentChart.purpose,\r\n    }\r\n  }\r\n  return (\r\n    <div style={{ marginBottom: '18px' }}>\r\n     <i>此处会自动识别, 无需改动</i>\r\n      {/* <ul>\r\n        {Object.keys(propsMap).map((typeName, index) => {\r\n          return (\r\n            <li key={typeName}>\r\n              <strong>{typeName}：</strong>{propsMap[typeName].join(' • ')}\r\n            </li>\r\n          )\r\n        })}\r\n      </ul> */}\r\n    </div>\r\n  );\r\n};","import Axios, { AxiosRequestConfig } from 'axios';\nimport { isObjectLike } from 'lodash';\nimport { notification } from 'antd';\nimport { ResponseData } from '../interface/http';\ninterface Config extends AxiosRequestConfig {\n  errorTip?: string; // 错误提示内容，获取后端数据失败时，\n}\nexport const rootPath = '/api';\n\nexport const http = Axios.create({\n  baseURL: rootPath,\n  timeout: 300000,\n  // headers: {\n  //   'Content-Type': 'application/json',\n  // },\n  // withCredentials: true,\n});\n\n\nexport const request = async function<T = any>(config: Config) {\n  const tip = config.errorTip || '网络开小差了！';\n  try {\n    const result = await http.request<ResponseData<T>>(config);\n    if (\n      result &&\n      result.status >= 200 &&\n      result.status < 300 &&\n      isObjectLike(result.data)\n    ) {\n      return result.data;\n    }\n\n    const error = {\n      tip,\n      response: result,\n      url: config.url,\n    };\n    notification.error({\n      message: `${tip}`,\n      description: error.tip,\n    });\n    throw error\n  } catch (error) {\n    notification.error({\n      message: `${tip}`,\n      description: `${error}`,\n    });\n    throw error\n  }\n\n\n};\nexport default request;\n/**\n * 检测服务端处理结果，失败就提示，成功就返回data.data\n * 注意：下游将无法获取data.code 和data.massage，下游可在catch中处理失败的情况\n * @param res\n */\nexport function checkResult<T extends any>(data: ResponseData<T>) {\n  if (data.code !== 0 && data.message) {\n    notification.error({\n      message: `请求错误 ${data.code}`,\n      description: String(data.message),\n    });\n    throw data.message;\n  } else {\n    return data.data;\n  }\n}\n"],"sourceRoot":""}